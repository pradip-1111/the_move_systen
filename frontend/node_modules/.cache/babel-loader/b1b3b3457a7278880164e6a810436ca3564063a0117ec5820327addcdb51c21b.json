{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { moviesAPI } from '../../services/api';\n\n// Async thunks\nexport const fetchMovies = createAsyncThunk('movies/fetchMovies', async (params, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await moviesAPI.getMovies(params);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n  }\n});\nexport const fetchFeaturedMovies = createAsyncThunk('movies/fetchFeaturedMovies', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await moviesAPI.getFeatured();\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n  }\n});\nexport const fetchMovieDetails = createAsyncThunk('movies/fetchMovieDetails', async (movieId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await moviesAPI.getMovie(movieId);\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n  }\n});\nexport const searchMovies = createAsyncThunk('movies/searchMovies', async ({\n  query,\n  filters\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await moviesAPI.searchMovies(query, filters);\n    return response.data;\n  } catch (error) {\n    var _error$response4;\n    return rejectWithValue(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error.message);\n  }\n});\nconst movieSlice = createSlice({\n  name: 'movies',\n  initialState: {\n    movies: [],\n    featuredMovies: [],\n    currentMovie: null,\n    searchResults: [],\n    genres: [],\n    loading: false,\n    searchLoading: false,\n    error: null,\n    searchError: null,\n    totalPages: 1,\n    currentPage: 1,\n    filters: {\n      genre: '',\n      year: '',\n      rating: '',\n      sortBy: 'popularity'\n    }\n  },\n  reducers: {\n    clearMovies: state => {\n      state.movies = [];\n      state.searchResults = [];\n    },\n    clearCurrentMovie: state => {\n      state.currentMovie = null;\n    },\n    setFilters: (state, action) => {\n      state.filters = {\n        ...state.filters,\n        ...action.payload\n      };\n    },\n    clearFilters: state => {\n      state.filters = {\n        genre: '',\n        year: '',\n        rating: '',\n        sortBy: 'popularity'\n      };\n    },\n    clearSearchResults: state => {\n      state.searchResults = [];\n      state.searchError = null;\n    }\n  },\n  extraReducers: builder => {\n    // Fetch movies\n    builder.addCase(fetchMovies.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchMovies.fulfilled, (state, action) => {\n      state.loading = false;\n      state.movies = action.payload.movies || [];\n      state.totalPages = action.payload.totalPages || 1;\n      state.currentPage = action.payload.currentPage || 1;\n    }).addCase(fetchMovies.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n\n    // Fetch featured movies\n    builder.addCase(fetchFeaturedMovies.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchFeaturedMovies.fulfilled, (state, action) => {\n      state.loading = false;\n      state.featuredMovies = action.payload;\n    }).addCase(fetchFeaturedMovies.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n\n    // Fetch movie details\n    builder.addCase(fetchMovieDetails.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchMovieDetails.fulfilled, (state, action) => {\n      state.loading = false;\n      state.currentMovie = action.payload;\n    }).addCase(fetchMovieDetails.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n\n    // Search movies\n    builder.addCase(searchMovies.pending, state => {\n      state.searchLoading = true;\n      state.searchError = null;\n    }).addCase(searchMovies.fulfilled, (state, action) => {\n      state.searchLoading = false;\n      state.searchResults = action.payload.movies || [];\n    }).addCase(searchMovies.rejected, (state, action) => {\n      state.searchLoading = false;\n      state.searchError = action.payload;\n    });\n  }\n});\nexport const {\n  clearMovies,\n  clearCurrentMovie,\n  setFilters,\n  clearFilters,\n  clearSearchResults\n} = movieSlice.actions;\nexport default movieSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","moviesAPI","fetchMovies","params","rejectWithValue","response","getMovies","data","error","_error$response","message","fetchFeaturedMovies","_","getFeatured","_error$response2","fetchMovieDetails","movieId","getMovie","_error$response3","searchMovies","query","filters","_error$response4","movieSlice","name","initialState","movies","featuredMovies","currentMovie","searchResults","genres","loading","searchLoading","searchError","totalPages","currentPage","genre","year","rating","sortBy","reducers","clearMovies","state","clearCurrentMovie","setFilters","action","payload","clearFilters","clearSearchResults","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/sarra/OneDrive - Amrita Vishwa Vidyapeetham- Chennai Campus/Desktop/movieHub2/frontend/src/store/slices/movieSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { moviesAPI } from '../../services/api';\r\n\r\n// Async thunks\r\nexport const fetchMovies = createAsyncThunk(\r\n  'movies/fetchMovies',\r\n  async (params, { rejectWithValue }) => {\r\n    try {\r\n      const response = await moviesAPI.getMovies(params);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response?.data || error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchFeaturedMovies = createAsyncThunk(\r\n  'movies/fetchFeaturedMovies',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await moviesAPI.getFeatured();\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response?.data || error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchMovieDetails = createAsyncThunk(\r\n  'movies/fetchMovieDetails',\r\n  async (movieId, { rejectWithValue }) => {\r\n    try {\r\n      const response = await moviesAPI.getMovie(movieId);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response?.data || error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const searchMovies = createAsyncThunk(\r\n  'movies/searchMovies',\r\n  async ({ query, filters }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await moviesAPI.searchMovies(query, filters);\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response?.data || error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst movieSlice = createSlice({\r\n  name: 'movies',\r\n  initialState: {\r\n    movies: [],\r\n    featuredMovies: [],\r\n    currentMovie: null,\r\n    searchResults: [],\r\n    genres: [],\r\n    loading: false,\r\n    searchLoading: false,\r\n    error: null,\r\n    searchError: null,\r\n    totalPages: 1,\r\n    currentPage: 1,\r\n    filters: {\r\n      genre: '',\r\n      year: '',\r\n      rating: '',\r\n      sortBy: 'popularity'\r\n    }\r\n  },\r\n  reducers: {\r\n    clearMovies: (state) => {\r\n      state.movies = [];\r\n      state.searchResults = [];\r\n    },\r\n    clearCurrentMovie: (state) => {\r\n      state.currentMovie = null;\r\n    },\r\n    setFilters: (state, action) => {\r\n      state.filters = { ...state.filters, ...action.payload };\r\n    },\r\n    clearFilters: (state) => {\r\n      state.filters = {\r\n        genre: '',\r\n        year: '',\r\n        rating: '',\r\n        sortBy: 'popularity'\r\n      };\r\n    },\r\n    clearSearchResults: (state) => {\r\n      state.searchResults = [];\r\n      state.searchError = null;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    // Fetch movies\r\n    builder\r\n      .addCase(fetchMovies.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchMovies.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.movies = action.payload.movies || [];\r\n        state.totalPages = action.payload.totalPages || 1;\r\n        state.currentPage = action.payload.currentPage || 1;\r\n      })\r\n      .addCase(fetchMovies.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n\r\n    // Fetch featured movies\r\n    builder\r\n      .addCase(fetchFeaturedMovies.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchFeaturedMovies.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.featuredMovies = action.payload;\r\n      })\r\n      .addCase(fetchFeaturedMovies.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n\r\n    // Fetch movie details\r\n    builder\r\n      .addCase(fetchMovieDetails.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchMovieDetails.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.currentMovie = action.payload;\r\n      })\r\n      .addCase(fetchMovieDetails.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n\r\n    // Search movies\r\n    builder\r\n      .addCase(searchMovies.pending, (state) => {\r\n        state.searchLoading = true;\r\n        state.searchError = null;\r\n      })\r\n      .addCase(searchMovies.fulfilled, (state, action) => {\r\n        state.searchLoading = false;\r\n        state.searchResults = action.payload.movies || [];\r\n      })\r\n      .addCase(searchMovies.rejected, (state, action) => {\r\n        state.searchLoading = false;\r\n        state.searchError = action.payload;\r\n      });\r\n  }\r\n});\r\n\r\nexport const {\r\n  clearMovies,\r\n  clearCurrentMovie,\r\n  setFilters,\r\n  clearFilters,\r\n  clearSearchResults\r\n} = movieSlice.actions;\r\n\r\nexport default movieSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}